<html>
<head>
    <meta charset="utf-8">
    <title>H1B Employment Analysis</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,500,300,900,100' rel='stylesheet'
          type='text/css'>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript" src="js/jquery.bootpag.min.js"></script>
    <script type="text/javascript" src="js/handlebars-v4.0.10.js"></script>
    <script type="text/javascript" src="js/d3-scale-chromatic.v0.3.min.js"></script>
    <script type="text/javascript" src="js/accounting.min.js"></script>
    <script src="lib/util/box.js"></script>
    <script src="lib/part1.js"></script>
    <script src="lib/part2.js"></script>
    <script src="lib/part3.js"></script>
    <script src="lib/part5.js"></script>
    <script src="lib/part6.js"></script>
    <script src="lib/map.js"></script>
    <script src="lib/sub_chart/median_wage.js"></script>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div style="width:100%;height:75px;background-color:#ffffff;border-bottom: 1px solid #d5d5d6;margin-bottom: 10px;">

    <div style="background-color: #e58c72;height: 100%;width:250px;line-height: 75px;text-align: center;color:#FFFFFF;font-size: 1.5em"
         class="pull-left">
    </div>
    <div style="line-height: 75px;margin-left:20px;color:#6e6e74;font-size: 1.4em" class="pull-left">
        H1B Employment Analysis (2011 - 2016)
    </div>
</div>

<div id="exTab" class="container">
    <div class="row">
        <div class="col-md-4 custom_padding">
            <div class="bg">
                <div class="title-header">
                    <div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination" id="pagination">

                            </ul>
                        </nav>
                    </div>
                </div>
                <div style="margin: auto;" id="left_panel">
                    <div style="width: 100%;height: 250px;padding:10px 20px 20px 20px" id="left_summary" >

                    </div>
                    <div style="width: 100%;height: 100%" id="bottom_chart">
                        <div class="panel-header">
                            <div class="pull-left heading-style" id="bottom_header" style="font-size: 14px">
                                Top 5 H1B Applicants (2011-2016)
                            </div>
                        </div>
                        <div style="margin: auto;" id="div_sub">
                            <svg height="250" id="svg_sub">

                            </svg>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-8 custom_padding">
            <div class="bg">
                <div class="panel-header">
                    <div class="pull-left heading-style" id="main_header">
                        Top 5 H1B Applicants (2011-2016)
                    </div>
                </div>
                <div id="content_main">
                    <div style="margin: auto;" id="div_main">
                        <svg height="540" id="svg_main">

                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog" style="width: 900px">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">About the Visualization</h4>
            </div>
            <div class="modal-body">
                <p><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">An interactive slideshow</span></strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black;"> narrative visualization structure has been used in visualization for the H1B Employment Analysis</span><span style="font-size: 10.0pt; font-family: Helvetica;">. <span style="color: black;">The left side panel has the 1-7 navigation control to navigate between the scenes. Each&nbsp;scene provides details on specific analysis using visualization.</span></span></p>
                <p><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">DATA: </span></strong></p>
                <p><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">The data is taken from following public domain:</span></p>
                <p><span style="font-size: 10.0pt; font-family: Helvetica; color: black;"><a href="https://www.kaggle.com/nsharan/h-1b-visa/downloads/h-1b-visa.zip"><span style="color: black; text-decoration: none; text-underline: none;">https://www.kaggle.com/nsharan/h-1b-visa/downloads/h-1b-visa.zip</span></a></span></p>
                <p><span style="font-size: 10.0pt; font-family: Helvetica; color: black;"><a href="https://www.kaggle.com/nsharan/h-1b-visa">https://www.kaggle.com/nsharan/h-1b-visa</a></span></p>
                <p><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">SCENES:</span></strong></p>
                <p><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">There are total 7 scenes in the interactive slideshow visualization. User can navigate between the scenes using the navigation control (1 &ndash; 7) located at the left-top header. The view and formatting is consistent across the scenes so that the user does not get dis-oriented by the graphics. The choice of colors and fonts are simple and minimalist to avoid distracting the viewer. The left panel provides more details including observations and additional visualization (scene 6 &amp; 7) and the right panel displays the main visualizations.<strong><span style="font-family: Helvetica;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></span></p>
                <p style="vertical-align: baseline;"><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black; text-transform: uppercase;">ANNOTATIONS</span></strong></p>
                <p style="vertical-align: baseline;"><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">Tooltip has been enabled for all the visualizations. On mouse-over more details will be displayed using the tooltip. Some of the visualizations have annotation built into them (scene 6 &amp; 7). In scene 6 &amp; 7 the annotation has been displayed using line and text. The line color indicates the type of the company (Outsourcing vs Product Company). The annotation of&nbsp;scene 6 has been retained in&nbsp;scene 7 to pro provide visual comparison of the different median wage between&nbsp;Outsourcing vs Product Company for 2016.</span></p>
                <p style="vertical-align: baseline;"><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black; text-transform: uppercase;">PARAMETERS</span></strong></p>
                <p style="vertical-align: baseline;"><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">The navigation control at the top of the left panel will help the user to navigate through 7 scenes. There are additional parameters at scene 1 to hide the city details, which can be helpful to view the state level applications using Too tip. At scene 5 the reset the y scale will change the scale of the visualization based on the applications filed by the product companies. Initially the checkbox is unchecked so that the difference can be compared visually.</span></p>
                <p style="vertical-align: baseline;"><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black; text-transform: uppercase;">TRIGGERS</span></strong></p>
                <p><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">At slide 6 &amp; 7 user can click on the individual box plot to visualize the &ldquo;Median Wage Yearly Trend</span><span style="font-size: 10.0pt; font-family: Helvetica;">&rdquo; for the specific company (which will be displayed using another line chart at the left panel). The color of the line chart will be same as the selected box plot's border color, also the company name will be displayed at the chart title. The navigation controls also act as triggers, which helps user to navigate between scenes.</span></p>
                <p style="vertical-align: baseline;"><strong><span style="font-size: 10.0pt; font-family: Helvetica; color: black; text-transform: uppercase;">Tools</span></strong></p>
                <p style="vertical-align: baseline;"><span style="font-size: 10.0pt; font-family: Helvetica; color: black;">D3 has been used to display all the visualizations. Additionally Bootstrap and JQuery java-script library has been used for layout and controls.</span></p>
                <p>&nbsp;</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>


<script type="text/babel" src="lib/app.jsx"></script>

<script>
$( document ).ready(function() {
    loadCompanyData();
    loadBoxPlotData();
    loadJobData();
    loadWageData();
    loadMapData();
    $("#left_summary").html(Handlebars.compile($("#page7").html()));
    $("#main_header").html("Geographical Distribution of H1B Applications (2011-2016)");

    $("#bottom_chart").hide();

    $("#toggleChart1").click(function(){
        if(document.getElementById('toggleChart1').checked) {
            drawCircle();
        } else {
            console.log("hide");
            removeCircle();
        }
    });

    $('#pagination').bootpag({
        total: 7
    }).on("page", function (event, num) {
        switch (num){
            case 4:
                $("#main_header").html("Top 5 H1B Applicants (2011-2016)");
                $("#bottom_chart").hide();
                drawAppTrend(out);

                $("#left_summary").html(Handlebars.compile($("#page1").html()));
                break;
            case 5:
                $("#main_header").html("Top 5 H1B Applicants - Product Development Companies (2011-2016)");

                $("#bottom_chart").hide();
                $("#svg_main").removeClass("box");
                var template = Handlebars.compile($("#page2").html());
                $("#left_summary").html(template);

                $("#toggleChart2").click(function(){
                    if(document.getElementById('toggleChart2').checked) {
                        drawAppTrend(soft);
                    } else {
                        drawSortwithOut();
                    }
                });

                drawSortwithOut();


                break;
            case 6:
                $("#left_summary").html(Handlebars.compile($("#page3").html()));
                $("#main_header").html("Wage Distribution of 2016 H1B Applications - Outsourcing Companies");
                $("#bottom_chart").show();
                drawBoxPlot(data_out,"#1575B5","box_blue",68869);
                $('#bottom_header').html("Median Wage Yearly Trend (2011 - 2016)");
                showMedianTrend(INFOSYS_MEDIAN,"INFOSYS","#004CD5");
                break;
            case 7:
                $("#left_summary").html(Handlebars.compile($("#page4").html()));
                $("#main_header").html("Wage Distribution of 2016 H1B Applications - Product Companies");
                $("#bottom_chart").show();
                drawBoxPlot(data_soft,"#a51c18","box_red",101088,68869,"#1575B5");
                $('#bottom_header').html("Median Wage Yearly Trend (2011 - 2016)");
                showMedianTrend(MICROSOFT_MEDIAN,"MICROSOFT","red");
                break;
            case 2:
                $("#left_summary").html(Handlebars.compile($("#page5").html()));
                $("#main_header").html("Most Applied Job Titles (2011-2016)");
                drawJobTitle();
                $("#bottom_chart").hide();
                break;
            case 3:
                $("#left_summary").html(Handlebars.compile($("#page6").html()));
                $("#main_header").html("Wage Distribution of the Most Applied Job Titles (2011-2016)");
                drawWageBoxPlot();
                $("#bottom_chart").hide();
                break;
            case 1:
                $("#left_summary").html(Handlebars.compile($("#page7").html()));
                $("#main_header").html("Geographical Distribution of H1B Applications (2011-2016)");
                drawMap();
                $("#bottom_chart").hide();

                $("#toggleChart1").click(function(){
                    if(document.getElementById('toggleChart1').checked) {
                        drawCircle();
                    } else {
                        console.log("hide");
                        removeCircle();
                    }
                });

                break;
        }
    });
})
</script>

<script id="page2" type="text/x-handlebars-template">
    <div>
        <div>
            <H4>Product Development Companies:</H4>
            <p style="color:#666">
                The grouped column chart here shows the top 5 applicants
                of the H1B program among the <b>Product Development Companies</b>.
            </p>
            <p style="color:#666">
                The previous chart ( Top 5 H1B Applicants - Outsourcing Companies ) can
                also be seen at the background. This provides a <b>visual comparison</b> of the
                two charts.
            </p>
            <p style="color:#666">
            <ul><li style="color:#666">We can see that the number of application filed by the <b>Product Development</b> Companies
                are much lower than the Outsourcing Companies.</li></ul>

            </p>
            <p style="color:#666">
                The Company Names are in x-axis and number of applications are in y-axis.
                The colors of the column chart indicates different years.
            </p>

            <p style="color:#666">
                Please click on the checkbox below to reset the y-scale of the chart according
                to the range of the Product Development Companies.
            </p>
        </div>
        <div>
            <label><input type="checkbox" value="" id="toggleChart2"> Reset Y Scale</label>
        </div>
    </div>
</script>


<script id="page1" type="text/x-handlebars-template">
    <div>
        <H4>Top 5 H1B Applicants are Outsourcing Companies:</H4>
        <p style="color:#666">
            The grouped column chart here shows that, the top 5 applicants of the H1B program
            from 2011 till 2016 are all Outsourcing Companies (Infosys, Tata Consultancy Services, Wipro, IBM, Accenture).
        </p>
        <p style="color:#666">
        <ul style="color:#666">
            <li>Looks like Infosys had filed maximum number of H1B applications.</li>
            <li>Generally the number of applications increased till 2015 from 2011,
                then there is a small dip in 2016.</li>
        </ul>
        </p>

        <p style="color:#666">
            The Company Names are in x-axis and number of applications are in y-axis.
            The colors of the column chart indicates different years.
        </p>
        <p style="color:#666">
            On mouse-over the tooltip will display exact number of application filed for each year.
        </p>

    </div>
</script>

<script id="page3" type="text/x-handlebars-template">
    <div>
        <H4 style="font-size:15px;">Wage Distribution - Outsourcing Companies:</H4>
        <p style="color:#666;font-size:12px">
            The box plot shows the wage distribution of the <b>outsourcing companies</b> (Also top 5 Applicants) for 2016
            applications. On hover the box plot will display the numeric data.
        </p>
        <p style="color:#666;font-size:12px">
            The median wage offered by the outsourcing companies in 2016 has been highlighted
            using a blue horizontal line, which is <b>$68,869</b> per year.
        </p>
        <p style="color:#666;font-size:12px">
            Click on any of the box plot to view the yearly trend of median wage for any
            specific outsourcing company from 2011 - 2016 in the below line chart.
            By default the trend of median wage offered by Infosys has been displayed.
        </p>
    </div>
</script>

<script id="page4" type="text/x-handlebars-template">
    <div>
        <H4 style="font-size:15px;">Wage Distribution - Product Companies:</H4>
        <p style="color:#666;font-size:12px">
            The box plot shows the wage distribution of the top 5 <b>product companies</b> for 2016
            applications.
        </p>
        <p style="color:#666;font-size:12px">
            The median wage offered by the product companies in 2016 has been highlighted
            using a red horizontal line (blue for outsourcing companies), which is <b>$101,088</b> per year.
        </p>
        <p>
            <ul><li style="color:#666;font-size:12px">The difference between the median wage offered
        by outsourcing vs product companies is around <b>$30,000</b>.</li></ul>
        </p>
        <p style="color:#666;font-size:12px">
            On hover the box plot will display the numeric data.
            The yearly trend of median wage for specific product company will be displayed
            in below line chart.
        </p>

    </div>
</script>


<script id="page5" type="text/x-handlebars-template">
    <div>
        <H4>Most Applied Job Titles:</H4>
        <p style="color:#666;">
            The bar plot shows the top 15 most applied H1B job titles from 2011 - 2016.
        </p>

        <p style="color:#666;">
            <ul>
                <li style="color:#666;">Most of the job
                    titles are related to IT/Software Industry
                </li>
                <li style="color:#666;">Programming Analyst is the most applied job title.</li>
            </ul>
        </p>
        <p style="color:#666;">
            On hover the actual number of applications will be displayed using tooltip.
        </p>
    </div>
</script>

<script id="page6" type="text/x-handlebars-template">
    <div>
        <H4>Wage Distribution of the Most Applied Job Titles:</H4>
        <p style="color:#666;">
            The box plot shows the wage distribution of the 15 most applied job Titles
            from 2011 - 2016 (previous chart).
        </p>

        <p style="color:#666;">
            The individual box plot has been ordered from
            High to Low median wage.
        </p>


        <p style="color:#666;">
        <ul>
            <li style="color:#666;">
                The Senior Software Engineer has the highest median wage ($92K).
            </li>
            <li style="color:#666;">
                Even though Programming Analyst was the highest applied job title,
                the median wage is towards the lower side ($58K).</li>
            <li style="color:#666;">
                The median salary of assistant professor is lowest (52K) among
                the 15 most applied job titles, however there are many outliers. This indicates
                many assistant professor's offered wage is more then $100K</li>
        </ul>
        </p>
        <p style="color:#666;">
            On hover of the box plot, the actual numeric data will be displayed using tooltip.
        </p>
    </div>
</script>


<script id="page7" type="text/x-handlebars-template">
    <div>
        <H4 style="margin-top:5;margin-bottom:5px">H1B Employment Analysis:</H4>
        <p style="color:#666;font-size:13px">
            We will be studying the H1B application data from 2011 - 2016
            provided by USCIS (United States Citizenship and Immigration Services).
        </p>
        <p style="color:#999;font-size:12px;">
            "The US H-1B visa is a non-immigrant visa that allows US companies to
            employ graduate level workers in specialty occupations that require
            theoretical or technical expertise in specialized fields such as in
            IT, finance, engineering, mathematics, science, medicine, etc." - Wikipedia
        </p>
        <H4>Geographical Distribution:</H4>
        <p style="color:#666;font-size:13px">
            The map shows the geographical distribution of H1B applications (2011 - 2016) across USA.
        <ul>
            <li style="color:#666;font-size:13px">Top three states with highest H1B employments are <b>New York, Texas & California.</b></li>
            <li style="color:#666;font-size:13px">We have used log scale to display the color.</li>
            <li style="color:#666;font-size:13px">Most of the H1B jobs are concentrated to few specific cities/areas.</li>
        </ul>
        </p>

        <p style="color:#666;font-size:13px">
            The color of each state is based on the number of applications (The legend is shown below the map).
        </p>

        <p style="color:#666;font-size:13px">
            The red circles highlights <b>50</b> top city provided as employment location in H1B Applications. The size of the circles depends
            on the number of applications.
        </p>
        <p style="color:#666;font-size:13px">
            Click on the checkbox below to hide the red circles, which showing details of the cities.

            <label style="padding-left:220px;padding-top:-20px"><input type="checkbox" value="" id="toggleChart1" checked="checked"> Show Top Cities </label>

        </p>


    </div>
</script>

</body>
</html>
